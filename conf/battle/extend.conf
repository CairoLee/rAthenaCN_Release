//--------------------------------------------------------------
// rAthenaCN 功能扩展配置文件
//--------------------------------------------------------------
//   开关选项: 可以用 on/off, yes/no 或 1/0 来表示开关
// 百分比选项: 填写100即表示100%
//   掩码选项: 没有特殊说明的情况下, 默认用来表示游戏中各单位的类型
//             1: 玩家, 2: 魔物, 4: 宠物, 8: 生命体, 16:佣兵
//             掩码选项一个数值可以表示里面有多个内容. 
//             例如: 若您想表示玩家和宠物, 那么只需将1和4相加, 填写5即可
//--------------------------------------------------------------

// 玩家在PVP地图时的最大攻速限制 (全职业限制)
//
// 如果玩家根据conf/player.conf 的max_aspd、max_third_aspd、
// max_extended_aspd计算出来的最大攻速, 比此选项的设置更小,
// 则以更小的攻速限制为准
// 
// 比如, 假设此选项设置为191, 且conf/player.conf 的max_aspd为190的话
// 你若是个剑士且处于PVP地图的话, 那么你的最大攻速将是190,
// 而不是此选项设置的191
//
// 若一张地图同时启用了PVP和GVG的话, 则以GVG地图的攻速限制优先
// 若设置为 0 则关闭此限制
max_aspd_for_pvp: 0

// 玩家在GVG地图时的最大攻速限制 (全职业限制)
//
// 如果玩家根据conf/player.conf 的max_aspd、max_third_aspd、
// max_extended_aspd计算出来的最大攻速, 比此选项的设置更小,
// 则以更小的攻速限制为准
// 
// 比如, 假设此选项设置为191, 且conf/player.conf 的max_aspd为190的话
// 你若是个剑士且处于GVG地图的话, 那么你的最大攻速将是190,
// 而不是此选项设置的191
//
// 若一张地图同时启用了PVP和GVG的话, 则以GVG地图的攻速限制优先
// 若设置为 0 则关闭此限制
max_aspd_for_gvg: 0

// 无视“使用阿修罗霸凰拳后的SP恢复限制” [开关选项]
// 在复兴后的版本中, 使用“阿修罗霸凰拳”后会有一定的时长禁止使用吃药等手段恢复SP
// 将此选项启用之后, 就不会有禁止恢复SP的限制了
ignore_extremityfist_sp_limit: no

// 使用“阿修罗霸凰拳”不会消耗玩家的SP [开关选项]
extremityfist_no_require_sp: no

// 强制没有loadevent地图标记的地图也自动触发 OnPCLoadMapEvent 事件 [开关选项]
// 
// 在一般情况下, 只有地图添加了loadevent地图标记之后, 玩家进入这张
// 地图时才会自动触发 OnPCLoadMapEvent 事件.
// 
// 如果将此选项改成 yes 的话,
// 那么无论地图是否拥有loadevent标记都会触发 OnPCLoadMapEvent 事件
// 
// 想为地图添加loadevent标记的话, 需要在脚本中加入类似下面的声明:
// prontera	mapflag	loadevent
force_loadevent: no

// 通过特定渠道获得的装备, 强制变成已鉴定 [掩码选项]
// 
//  &1: 使用 getrandgroupitem 获得的装备(部分箱子使用该指令)
//  &2: 打死魔物, 魔物道具掉落到地上的装备
//  &4: 打死魔物, 掉落到玩家背包中的MVP奖励(装备)
//  &8: 使用“偷窃”技能偷到的装备
// &16: 在完成任务的过程中, 通过任务系统获得的装备(详见 db/[pre-]re/quest_db.txt 的注释)
// &32: 通过 makeitem 在地面上创造出的装备
force_identified: 0

// 当玩家乘坐商城坐骑后, 是否禁止使用物品 [掩码选项]
//
//   &1: 禁止使用“治愈类物品”, 物品类型编号为 0
//   &2: 禁止使用“可用类物品”, 物品类型编号为 2
//   &4: 禁止使用“盔甲/披肩/鞋子/头饰/装饰品等防具”, 物品类型编号为 4
//   &8: 禁止使用“武器”, 物品类型编号为 5
//  &16: 禁止使用“卡片类物品”, 物品类型编号为 6
//  &32: 禁止使用“箭矢类物品 (箭矢/子弹/其他)”, 物品类型编号为 10
//  &64: 禁止使用“延迟消耗类物品”, 物品类型编号为 11
// &128: 禁止使用“影子装备”, 物品类型编号为 12
// &256: 禁止使用“商城物品”, 物品类型编号为 18
//
// 当某种物品被禁止使用后, 从物品栏双击此类物品时, 什么事情都不会发生,
// 并且会在玩家的聊天栏中显示出 conf/msg_conf/racn_map_msg.conf 中消息
// 编号为 1505 的提示信息. 
//
// rAthena 默认禁止在坐骑的时候使用“延迟消耗类物品”, 所以该选项的默认值为 64
cash_mounting_use_item_limit: 64

// 阿修罗霸凰拳咏唱完毕时, 是否再次确认气弹数量 [开关选项]
// 
// 若改成yes来启用的话, 那么在“阿修罗霸凰拳”咏唱的过程中, 由于被别人“吸气”等原因
// 而导致气弹数量达不到发动“阿修罗霸凰拳”标准时, “阿修罗霸凰拳”将会使用失败.
//
// 注意: 官服没有这样的机制, 此选项在仿官服中应该为: no
extremityfist_spiritball_strict: no

// 阿修罗霸凰拳咏唱完毕时, 是否再次确认“爆气”状态 [开关选项]
// 
// 若改成yes来启用的话, 那么在“阿修罗霸凰拳”咏唱的过程中, 由于被别人使用“魔法解除”等原因
// 而导致“爆气”状态消失的话, 那么“阿修罗霸凰拳”将会使用失败.
//
// 注意: 官服没有这样的机制, 此选项在仿官服中应该为: no
extremityfist_explosion_strict: no

// 玩家移动事件(OnPCMoveFilter)的触发方式
//
// 0 - 永远不触发此事件
// 1 - 只有使用 when_pcmove_doevent; 脚本指令后, 玩家的下一次移动才触发事件(默认值)
// 2 - 玩家的每次移动都触发(在线人数多的话, 会影响性能)
pc_move_event_trigger_type: 1

// 是否启用聊天内容敏感词过滤机制 [开关选项]
// 启用后将会根据 db/manner.txt 设置的敏感词来过滤聊天内容
// 
// 0 - 不启用过滤机制
// 1 - 若聊天内容包含敏感词, 则直接拦截消息, 并在发送者的聊天栏中
//     显示出 conf/msg_conf/racn_map_msg.conf 中消息编号为 1507 的提示信息(默认值)
// 2 - 若聊天内容包含敏感词, 则直接拦截消息, 发送者会被自动禁言一段时间(可以在下方
//     manner_filter_nochat选项中设定禁言时间), 并在发送者的聊天栏中显示出 
//     conf/msg_conf/racn_map_msg.conf 中消息编号为 1508 的提示信息
// 3 - 若聊天内容包含敏感词, 则直接拦截消息, 自动将发送者踢下线,
//     并对其进行限时封号操作(可以在下方manner_filter_bantime选项中设定封号时长),
//     且在发送者的聊天栏中显示出 conf/msg_conf/racn_map_msg.conf 中消息编号为 1509 的提示信息
// 4 - 若聊天内容包含敏感词, 消息对接受者不可见, 但是对消息发送者可见
//    (这会让发送者以为消息已经发出去了, 而实际上并没有)
manner_filter_system: 1

// 当需要禁言聊天内容包含敏感词的玩家时, 禁言多长时间 (单位为分钟)
manner_filter_nochat: 1

// 当需要限时封号聊天内容包含敏感词的玩家时, 封他多长时间 (单位为秒)
manner_filter_bantime: 60

// 是否对聊天内容敏感词过滤机制进行调试 [开关选项]
//
// 开启调试机制后, 当玩家说话时, 将在“地图服务器”的终端窗口中打印出
// 敏感词过滤的耗时(精确到毫秒)
//
// 性能情况:
// 使用10000条敏感词进行过滤的情况下, 每次发言需要花费约2~3毫秒进行检测
manner_filter_debug: no

// 当没有权限的玩家执行了GM指令时, 如何进行处理
//
// 0 - 不处理, 当做普通聊天内容发出去
// 1 - 给予无权限的提示, 吃掉这条消息而不会当做聊天内容发出去 (rAthenaCN 默认值)
//
// 若配置为 1, 那么会在发送者的聊天栏中显示出 conf/msg_conf/racn_map_msg.conf 中
// 消息编号为 1525 的提示信息
//
// 若设置为 1, 那么只有玩家尝试执行的指令确实是存在的, 才会给出提示消息,
// 如果执行的是一个不存在的指令比如: @_@ 这样一个表情的话, 还是能够被正常发出去.
no_permission_cmd_process_mode: 1

// 是否保存玩家的行为策略编号 [开关选项]
// 若设置为 no 的话, 则不管将玩家的行为策略编号设置为多少
// 每次玩家重新登录的时候, 都会采用 0 号行为策略
policy_save: yes

// 复兴后采用哪个版本的攻速公式? 
// 
// 0 - rAthena 默认的复兴后攻速公式
// 1 - 仙境传说国际服(iRO)复兴后攻速公式 (算法详见: http://irowiki.org/wiki/Aspd)
// 
// 修改此处的值后, 若使用 @reloadbattleconf 重载配置, 
// 那么玩家需要小退或者过图(或者以穿脱装备等方式触发能力重算过程), 才能在面板中看到新的攻速值.
// 需要特别注意的是, 此选项只对“复兴后”版本有效.
//
// 此功能属于实验功能, 各位GM请务必详细测试后, 再考虑是否采用到线上
// 感谢“skybook”同学提供iRO攻速公式代码
aspd_formula_type: 0

// 当魔物或者NPC使用地震技能(NPC_EARTHQUAKE)时, 如果周围没有玩家的话, 
// 是否不显示除数不能为0的报错信息? [开关选项]
//
// 我们知道魔物的地震技能所造成的伤害会均分给攻击范围内的玩家,
// 但是总有一些特殊情况, 当魔物技能读条完毕后, 会发现周围的玩家已经离开攻击范围了.
// 此时如果继续强制计算伤害, 就会出现“除数为零”的情况,
// rAthena 官方虽然避免了这种情况带来的程序崩溃, 不过还是会在终端窗口中显示出一个
// 严重的报错信息. 你可以将此选项改成 yes 来隐藏报错信息. 
ignore_zero_range_error: no

// 是否允许通过切换武器的方式修改伤害结算时的附加特性? [开关选项]
// 
// 在以前的版本中, 使用A武器造成伤害之前的一瞬间, 切换成B武器可以达到
// “造成A武器的伤害, 并附加B武器的异常状态”的效果, 例如:
// 使用一个伤害更高的“刺杀拳刃”来发动“音速投掷”, 在伤害结算之前, 
// 切换到带有冰冻效果的“冰灵拳刃”, 可以造成一个“带冰冻效果的刺杀拳刃伤害”.
//
// 在新版本中, 此问题被 rAthena 官方修复了. 但考虑到该技术在 PVP 中有它的价值, 
// 所以设置此选项, 以满足玩家们的多样化需求. 默认值为: no
// 感谢“jaywb15”同学的建议
allow_switch_weapon_when_damage: no

// 是否同步 2016-10-26 韩服对宫廷舞娘“狂风暴雨”, 
// 及反叛者“圆桌舞蹈”、“火焰暴雨”技能的箭矢/弹药需求调整?
// 调整之后: 玩家施放这三个技能所需的箭矢/弹药数量会 + 1
// 
// 注意: 虽然所需的数量 + 1, 但是实际上消耗的箭矢数量不变.
// 
// 举个例子:
// 在调整之前使用“火焰暴雨”需要消耗 10 个子弹, 背包有 10 个子弹就能发动技能.
// 在调整之后使用“火焰暴雨”需要消耗 10 个子弹, 背包必须有 11 个子弹才能发动技能.
// 
// rAthenaCN 于 v1.5.5 版本加入此选项, 但为防止调整给各位 GM 带来麻烦, 
// 所以添加此选项用来回滚之前的设置. 默认值为: yes
extra_ammo_requirement: yes

// 当击杀任务所指定的魔物之后, 其他已经接受相同任务的队员, 
// 在什么位置才能共享任务的杀怪进度?
// 
// 0 - 必须在被击杀的魔物视野范围内, 才能共享任务的杀怪进度 (默认)
// 1 - 必须在与被击杀魔物在相同地图中, 才能共享任务的杀怪进度
// 2 - 无论在什么地图, 只要在线就能共享任务的杀怪进度
//
// 举个例子:
// 接了相同任务的玩家(这些任务必须是 ALT + U 可见, 
// 且在 quest_db 中配置了要击杀的魔物目标),
// 当他们组队一起完成任务时, 如果 A 玩家击杀了任务怪, 
// 那么 B 玩家得在什么位置才能同时也计算为任务怪击杀 + 1?
// 
// 在官服默认情况下, B 玩家必须站在被击杀魔物的视野范围内,
// 才能将 A 玩家击杀的魔物也同时计入 B 玩家的任务进度中.
//
// 但有时候, 可能 B 玩家由于战略需要被派遣到任务目标魔物视野范围之外
// 的地方进行工作, 此时若 A 玩家击杀了关键的、死一次就不会复活的任务目标魔物,
// 那么 B 玩家可能就会由于任务进度不同步, 而导致卡任务等悲剧发生.
// 为了避免这种情况出现, 可以将此选项设置为 1 
quest_update_objective_area: 0

// 当 [pre-]re/item_combo_db.txt 出现两组或多组一样的组合(combo)时, 
// 它们的效果生效策略是什么样的?
//
// 注意: 
// 这里提到的“一样的组合”, 那么什么是“一样的组合”呢?
// 是指 combo_db 中的道具ID部分(比如 1201:2301), 只要道具ID部分一样,
// 那么就认为他们是“一样的组合”.
// 
// 0 - import 低优先, 同时生效模式:
//     在 [pre-]re/item_combo_db.txt 中出现多组一样的组合, 那么它们的效果将被同时触发.
//     若 db/import/item_combo_db.txt 中存在与 [pre-]re/item_combo_db.txt 相同的组合,
//     则 db/import/item_combo_db.txt 中的组合效果将被无视.
// 
// 1 - import 无差异, 同时生效模式:
//     在 [pre-]re/item_combo_db.txt 中出现多组一样的组合, 那么它们的效果将被同时触发.
//     若 db/import/item_combo_db.txt 中存在与 [pre-]re/item_combo_db.txt 相同的组合,
//     则 db/import/item_combo_db.txt 中的组合效果也将被同时触发.
// 
// 2 - import 无差异, 后来居上模式:
//     写在 [pre-]re/item_combo_db.txt 最后的一条组合的效果, 将覆盖之前的组合效果.
//     若 db/import/item_combo_db.txt 中存在与 [pre-]re/item_combo_db.txt 一样的组合,
//     则最终生效的是 import 中最后一条组合效果.
// 
// rAthena 官方逻辑是 0, 为了方便维护的话 rAthenaCN 推荐选择 2. 请根据你的实际情况选择. 
// 感谢“咪兔酱”指出此问题并给出建议的解决方案.
//
// 如果希望修改此选项后立刻生效, 请先执行 @reloadbattleconf , 再执行 @reloaditemdb .
combo_db_overwrite_mode: 0

// 是否关闭技能的公用延迟特性? [开关选项]
// 
// 若你使用的是复兴前版本, 但发现使用 A 技能后需要等待一段时间才能使用 B 技能的话,
// 说明这是技能的公用延迟在起作用.
// 
// 如果你希望使用 A 技能后可以立刻使用 B 技能, 中间没有公用延迟的话, 请将此选项设置为 yes.
// 
// 注意: 技能的公用延迟特性依赖状态倒计时封包, 
// 若你关闭了 conf/battle/client.conf 的 display_status_timers 选项的话(设置为 no)
// 那么系统将强制关闭技能的公用延迟特性.
// 也就是说, 在那种情况下, 无论将此选项的值改成什么, 都不会有任何作用.
close_skill_common_delay: no

// 在复兴后的版本中, 当 NPC 处于“禁止与此NPC对话的玩家使用物品”模式时, 
// 具体禁止使用的物品策略是什么?
//
// 下面策略的注释中, 提到的 NPC 都是指处于“禁止与此NPC对话的玩家使用物品” 模式的 NPC.
//
// 0 - 保持官方默认策略:
//     仅禁止装备的穿戴和脱下, 但可以使用任何技能和消耗品
//     但是连续使用两个因调用 callfunc 而打开对话框的道具, 则地图服务器会报出错误: 无法恢复堆栈! 连续运行了必须使用堆栈的脚本
// 
// 1 - 使用复兴前的策略:
//     禁止穿戴和脱下装备、禁止使用技能和消耗品
//     此做法对地图服务器来说虽然最为安全, 但是也会失去了一定的能力, 比如和 NPC 对话过程中有怪打你时, 你无法吃药
// 
// 2 - 使用 rAthenaCN 特色策略:
//     禁止穿戴和脱下装备、但可以使用技能以及“物品使用脚本”中不含 callfunc 命令的道具
//     相比前两者比较中庸的方案, 在尽力避免出现地图服务器报错的同时, 也保留了玩家使用一定物品的能力
//
// 小提示:
// 目前有两种方法可以将 NPC 切换到 “禁止与此NPC对话的玩家使用物品” 模式:
// - 使用 disable_items; 指令来将当前的 NPC 切换为“禁止与此NPC对话的玩家使用物品”模式.
// - 将 conf/battle/items.conf 中 item_enabled_npc 选项设置为 no, 
//   那么此时所有的 NPC 就算不执行 disable_items; 指令, 也会自动切换为“禁止与此NPC对话的玩家使用物品”模式.
// 
// 默认值为: 2
renewal_disable_items_logic: 2

// 无论目前正在与玩家交互的 NPC 脚本是否使用 disable_items; 脚本指令,
// 只要玩家与任何 NPC 的交互没完成之前, 是否都禁止使用“物品使用脚本”包含 callfunc 命令的道具? [开关选项]
// 
// 此选项仅限复兴后的版本中使用, 复兴前此选项无效
//
// 可以一举解决官方使用了 callfunc 但是被 call 的 function 没有使用 disable_items;
// 而最终导致连续使用此类道具时(如"移动仓库使用券", 物品编号: 12211), 地图服务器报错的问题. 
disable_callfunc_items_when_busy: yes

// 当触发 OnPCStatCalcEvent 时是否立刻执行其脚本代码, 而使其绕过事件队列机制 [开关选项]
// 感谢“tづ记忆?斑驳C”提供此选项对应的核心代码
//
// 此选项主要为了解决当 OnPCStatCalcEvent 的事件执行了包括但不限 bonus 系列指令时, 
// 如果使用 recalculatestat 或 statuscalc 等用来重新计算玩家能力的脚本指令时, bonus 等系列指令的效果会丢失的问题
//
// 这是一个实验功能, 我们无法穷尽次此改动可能带来的其他负面影响, 
// 若您不幸遇到 OnPCStatCalcEvent 的工作不符合你的预期, 可以将此选项设置为 no 来使其恢复成 rAthena 官方默认的工作方式.
//
// 但是无论您选择 yes 还是 no, 请不要在 OnPCStatCalcEvent 事件中尝试去执行以下的脚本指令:
// sleep、sleep2、next、close2、menu、select、prompt、input、progressbar
// 否则可能会导致脚本的执行堆栈被破坏, 而导致地图服务器显示对应的报错.
execute_npce_statcalc_right_now: yes

// 有同学反馈 0.01% 抓宠成功率的情况下, 还是可以很容易捕捉到宠物
// 经查, 是因为 rAthena 使用的宠物捕捉成功率公式太老导致的, 没有充分考虑玩家等级超过100级情况下的平衡问题
//
// rAthena 目前的捕捉成功率公式为:
// 捕捉成功率 = (宠物在pet_db.txt中设定的成功率 + (玩家基础等级 - 魔物等级)*30 + 玩家的Luk*20)*(200 - 魔物剩余血量的百分比)/100
//
// 目前由于无法获知 kRO 和官服的宠物捕捉成功率公式
// 为此只能先做出一些临时修复措施, 下面有两种方案可供您选择, 请根据喜好进行调整:
// 
// 0 - 保持 rAthena 官方的设定
//     在这个设置下, 满级175级拥有150LUK的玩家
//     捕捉魔物等级为1, db中设置捕捉成功率为 0.01% 的满血宠物, 成功率为: 82.21%
// 
// 1 - 捕捉成功率 = (宠物在pet_db.txt中设定的成功率 + 玩家的Luk*20)*(200 - 魔物剩余血量的百分比)/100
//     在这个设置下, 满级175级拥有150LUK的玩家
//     捕捉魔物等级为1, db中设置捕捉成功率为 0.01% 的满血宠物, 成功率为: 30.01%
//     相当于: 忽略了玩家与魔物的等级差异加成
// 
// 2 - 捕捉成功率 = 宠物在pet_db.txt中设定的成功率 * (200 - 魔物剩余血量的百分比)/100
//     在这个设置下, 满级175级拥有150LUK的玩家
//     捕捉魔物等级为1, db中设置捕捉成功率为 0.01% 的满血宠物, 成功率为: 0.01%
//     相当于: 忽略了玩家与魔物的等级差异加成, 以及LUK加成
//
// 最后一次确认此问题的时间为: 2017-12-13 23:18:23
//
// 默认值为: 1 (若您是复兴前, 且玩家最高等级 100 级的话, 那么建议选择 0)
pet_catch_rate_fix_mode: 1

